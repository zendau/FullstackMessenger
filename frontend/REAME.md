# FullstackChat

## Описание

FullstackChat — проект представляет собой комплексную платформу для общения и взаимодействия пользователей, включающую в себя широкие возможности для текстовой и видеокоммуникации, управления профилями, а также обеспечения безопасности и удобства использования. Основные функции платформы охватывают регистрацию и авторизацию, управление профилем, создание и ведение чатов, проведение видеоконференций, а также адаптацию интерфейса под нужды пользователей.

## Основные функции

#### Пользовательские функции:

*   **Регистрация и авторизация:**
    *   Регистрация с верификацией по электронной почте.
    *   Вход через логин и пароль.
    *   Восстановление пароля через электронную почту.
*   **Профиль пользователя:**
    *   Редактирование профиля (почта, логин, телефон, информация о пользователе).
    *   Просмотр профилей других пользователей.
    *   Возможность добавлять в контакты других пользователей.
    *   Просмотр списка контактов, а также исходящих и входящих заявок на добавление в контакты.
    *   Блокировка пользователей и управление списком заблокированных (черный список).

#### Чат и сообщения:

*   **Личные и групповые чаты:**
    *   Создание приватных чатов (один на один).
    *   Создание и управление групповыми чатами.
    *   Управление участниками группового чата (добавление, удаление, блокировка).
    *   Отправка текстовых сообщений и медиафайлов (изображений, видео, документов).
    *   Редактирование и удаление сообщений.
    *   Отправка сообщений с поддержкой ссылок.
*   **Функции чата:**
    *   Отображение статуса онлайн/офлайн для пользователей.
    *   Статус прочтения сообщений.
    *   Отображение количества новых сообщений в чатах.
    *   Системное сообщение с датой при отправке первого сообщения за день.
    *   Поддержка многозадачности (несколько открытых чатов в разных вкладках).
    *   Поиск по контактам и чатам.
    *   Просмотр и удаление медиафайлов из чатов.

#### Темы и интерфейс:

*   **Темы и локализация:**
    *   Поддержка темной и светлой темы интерфейса.
    *   Выбор языка интерфейса.
*   **Адаптивность:**
    *   Адаптивная мобильная версия веб-приложения.

#### Видеозвонки и конференции:

*   **Видео и аудиоконференции:**
    *   Возможность проведения видео- и аудиозвонков.
    *   Управление микрофоном и камерой во время звонка.
    *   Возможность записи звонков и демонстрации экрана.
    *   Доступ к чату во время звонка.

#### Безопасность и управление сессиями:

*   **Управление сессиями:**
    *   Возможность входа в аккаунт с множества устройств.
    *   Просмотр активных сессий и их отключение по необходимости.


## Основные технологии

Проект построен на следующих технологиях:

- **Frontend:**

    - Vue.js
    - Vuex
    - Vue Router
    - Vee-validate
    - vue-i18n
    - Axios
    - PeerJS
    - yup
- **Backend:**
    - NestJS
    - TypeORM
    - MySQL
    - Redis(Вместе с батчингом данных)
    - JWT (JSON Web Tokens)
    - WebSocket

#### Инфраструктура и развертывание:

*   **Docker** — для контейнеризации приложений и облегчения процесса развертывания на сервере.
*   **Nginx** — для проксирования запросов и обеспечения балансировки нагрузки.

#### Видео и аудиозвонки:

*   **WebRTC** — технология, обеспечивающая прямую передачу аудио и видео между пользователями.
*   **Socket.IO** — для обработки событий в реальном времени, связанных с видеозвонками и чатом.

## Микросервисная архитектура

**FullstackChat** использует микросервисную архитектуру на стороне backend, что обеспечивает гибкость, масштабируемость и легкость поддержки проекта. Каждый микросервис выполняет свою конкретную задачу и взаимодействует с другими сервисами через унифицированные API.

### Сервисы:

1.  **Gateway**:

    *   Основной входной точкой для всех запросов к backend-у. Выполняет роль API-шлюза, перенаправляя запросы к соответствующим микросервисам.
    *   Обеспечивает маршрутизацию, балансировку нагрузки и безопасность.
2.  **Сервис авторизации**:

    *   Управляет процессами регистрации, входа пользователей, аутентификации и авторизации.
    *   Использует JWT для создания и валидации токенов доступа.
    *   Обеспечивает функции восстановления пароля и управления сессиями.
3.  **Сервис чата**:

    *   Отвечает за обработку текстовых сообщений, создание и управление чатами (как личными, так и групповыми).
    *   Поддерживает функционал редактирования и удаления сообщений, отправку мультимедийных файлов, а также статусы сообщений (прочитано/непрочитано).
4.  **Сервис звонков**:

    *   Обеспечивает функционал видео- и аудиозвонков между пользователями.
    *   Поддерживает управление качеством связи, запись звонков, демонстрацию экрана, а также работу с чатом во время звонка.
5.  **Файловый сервис**:

    *   Управляет загрузкой, хранением и доставкой медиафайлов (изображений, видео, документов).
    *   Поддерживает функции управления медиафайлами в чатах, включая их удаление и просмотр.


## Установка и запуск

### Предварительные требования


- **Node.js** версии 20.x и выше — необходим для работы с backend- и frontend-частью приложения.
- **pnpm** — пакетный менеджер, используемый для установки зависимостей и управления пакетами.
- **Docker** и **Docker Compose** — для контейнеризации и развертывания микросервисов.
- **tmux** (опционально) — терминальный мультиплексор, который может быть использован для запуска и управления микросервисами в отдельных сессиях.

### Клонирование репозитория

```bash
git clone https://github.com/yourusername/fullstackchat.git
cd fullstackchat
```

### Установка зависимостей

```bash
pnpm install
```

### Настройка переменных окружения

Создайте файлы `.env.development`, `.env.production`, и `.env.test` в корневом каталоге проекта. Заполните их по указанному образцу как в `.env.example`, указав необходимые переменные окружения для каждого окружения (development, production, test):

### Запуск микросервисов с Docker Compose

```bash
docker-compose up -d
```

Этот шаг запустит все микросервисы в Docker-контейнерах.

### Запуск backend и микросервисов

Для запуска сервера и всех микросервисов можно воспользоваться скриптом на bash. Выполните в корне проекта:

```bash
pnpm run dev:server
```

Эта команда запустит сессию `tmux`, в которой будут работать все микросервисы.

Если `tmux` не установлен, микросервисы можно запускать вручную. Для этого перейдите в директорию нужного микросервиса и выполните команду:

```bash
cd services/<service_name>
pnpm run start
```

### Запуск frontend

Для запуска frontend-сервера можно использовать одну из следующих команд:

- Выполните в корне проекта:

```bash
pnpm run dev:client
```

- Либо перейдите в папку с клиентом и выполните:

```bash
cd client
pnpm run dev
```

Эти команды запустят frontend для разработки, используя ваше окружение.
